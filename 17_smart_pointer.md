# smart_pointer

## âœ… ìŠ¤ë§ˆíŠ¸ í¬ì¸í„° ì¢…ë¥˜

| ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°              | ì„¤ëª…                                     |
| -------------------- | -------------------------------------- |
| `std::unique_ptr<T>` | ì†Œìœ ê¶Œì´ í•˜ë‚˜ì¸ ê°ì²´                            |
| `std::shared_ptr<T>` | ì°¸ì¡° ì¹´ìš´íŠ¸ ê¸°ë°˜ ê³µìœ  ì†Œìœ  ê°ì²´                     |
| `std::weak_ptr<T>`   | `shared_ptr`ë¥¼ ì°¸ì¡°í•˜ë˜ ì†Œìœ ê¶Œì€ ì—†ìŒ (ìˆœí™˜ ì°¸ì¡° ë°©ì§€ìš©) |

---

## âœ… ìŠ¤ë§ˆíŠ¸ í¬ì¸í„° ìƒì„± í•¨ìˆ˜

| í•¨ìˆ˜                         | ì„¤ëª…                                           |
| -------------------------- | -------------------------------------------- |
| `std::make_unique<T>(...)` | C++14ë¶€í„° ë„ì…. ì˜ˆì™¸ ì•ˆì „í•˜ê³  ê°„ê²°í•œ `unique_ptr` ìƒì„± ë°©ì‹   |
| `std::make_shared<T>(...)` | `shared_ptr`ì„ íš¨ìœ¨ì ìœ¼ë¡œ ìƒì„± (ì°¸ì¡° ì¹´ìš´íŠ¸ì™€ ê°ì²´ë¥¼ í•œ ë²ˆì— í• ë‹¹) |

---

## âœ… ìœ ìš©í•œ ë©¤ë²„ í•¨ìˆ˜ ë° ê´€ë ¨ í•¨ìˆ˜

### ğŸ“Œ ê³µí†µ (unique\_ptr / shared\_ptr)

| í•¨ìˆ˜/ê¸°ëŠ¥          | ì„¤ëª…                                       |
| -------------- | ---------------------------------------- |
| `.get()`       | ìƒ í¬ì¸í„°(raw pointer)ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤ (ì£¼ì˜í•´ì„œ ì‚¬ìš©)      |
| `.reset()`     | í˜„ì¬ ê°ì²´ì™€ì˜ ì—°ê²°ì„ ëŠê³  ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°ë¥¼ ì´ˆê¸°í™”              |
| `.release()`   | `unique_ptr` ì „ìš©. ìƒ í¬ì¸í„° ë°˜í™˜ í›„ ì†Œìœ ê¶Œ í•´ì œ       |
| `.use_count()` | `shared_ptr` ì „ìš©. ì°¸ì¡° íšŸìˆ˜ ë°˜í™˜                |
| `.unique()`    | `shared_ptr` ì „ìš©. ìì‹ ë§Œ ê°ì²´ë¥¼ ì†Œìœ í•˜ê³  ìˆëŠ”ì§€ í™•ì¸     |
| `.expired()`   | `weak_ptr` ì „ìš©. ì°¸ì¡° ëŒ€ìƒì´ ì†Œë©¸ë˜ì—ˆëŠ”ì§€ í™•ì¸          |
| `.lock()`      | `weak_ptr` â†’ `shared_ptr`ë¡œ ìŠ¹ê²© (ìœ íš¨í•œ ê²½ìš°ì—ë§Œ) |

---

## âœ… ê¸°íƒ€ ìœ ìš©í•œ ê¸°ëŠ¥

### ğŸ“Œ ì»¤ìŠ¤í…€ ì‚­ì œì(Custom deleter)

```cpp
std::unique_ptr<MyClass, void(*)(MyClass*)> ptr(new MyClass, [](MyClass* p) {
    std::cout << "ì‚­ì œì í˜¸ì¶œ\n";
    delete p;
});
```

* ë¦¬ì†ŒìŠ¤ í•´ì œë¥¼ ì‚¬ìš©ì ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ì˜ˆ: íŒŒì¼ ë‹«ê¸°, ë©”ëª¨ë¦¬ ë§µ í•´ì œ ë“±)

---

### ğŸ“Œ ë°°ì—´ ì§€ì› (unique\_ptrë§Œ)

```cpp
std::unique_ptr<int[]> arr(new int[10]); // ìŠ¤ë§ˆíŠ¸ ë°°ì—´
arr[0] = 42;
```

---

### ğŸ“Œ ìŠ¤ë§ˆíŠ¸ í¬ì¸í„° + ì»¨í…Œì´ë„ˆ ì¡°í•©

```cpp
std::vector<std::shared_ptr<MyClass>> objects;
objects.push_back(std::make_shared<MyClass>());
```

* `std::shared_ptr`ëŠ” `std::vector`, `std::map` ë“±ê³¼ ì˜ ì–´ìš¸ë¦½ë‹ˆë‹¤.

---

## ğŸ”¥ ìš”ì•½í‘œ

| ê¸°ëŠ¥             | unique\_ptr | shared\_ptr | weak\_ptr |
| -------------- | ----------- | ----------- | --------- |
| `.get()`       | âœ…           | âœ…           | âŒ         |
| `.reset()`     | âœ…           | âœ…           | âŒ         |
| `.release()`   | âœ…           | âŒ           | âŒ         |
| `.use_count()` | âŒ           | âœ…           | âœ…         |
| `.lock()`      | âŒ           | âŒ           | âœ…         |
| `.expired()`   | âŒ           | âŒ           | âœ…         |

---

## ğŸ“Œ ì°¸ê³ 

* `std::enable_shared_from_this<T>`
  â†’ í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ ìì‹ ì— ëŒ€í•œ `shared_ptr`ì„ ì•ˆì „í•˜ê²Œ ì–»ì„ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

```cpp
class MyClass : public std::enable_shared_from_this<MyClass> {
public:
    std::shared_ptr<MyClass> getPtr() {
        return shared_from_this();
    }
};
```
